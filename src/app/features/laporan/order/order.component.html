<div class="content-wrapper">
  <div class="container-xxl flex-grow-1 container-p-y">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb breadcrumb-style1">
        <li class="breadcrumb-item">
          <a href="javascript:void(0);">Laporan</a>
        </li>
        <li class="breadcrumb-item active">Pesanan</li>
      </ol>
    </nav>
    <div class="card" *ngIf="!showForm">
      <div class="card-header">
        <div class="row form-group my-2">
          <div class="col-2">
            <input type="text" name="param_kategori" [(ngModel)]="modelParam.kategori"
              class="form-control form-control-sm" placeholder="Cari Invoice ... " (input)="reloadDataTable()">
          </div>
          <div class="col-2">
            <button class="btn btn-sm btn-outline-primary btn-rounded" (click)="reset()">
              <i class="fas fa-undo"></i>Reset</button>
          </div>
        </div>
      </div>
      <div class="card-header">
        <div class="row form-group my-2">
          <div class="col-2">
            <img src="/assets/img/logo.png" alt="">
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-12">
            <div class="text-nowrap div-b-table">
              <table style="width: 3000px"
                class="table custom-table table-laporan table-lap-penjualan table table-hover table-striped table-sticky">
                <thead>
                  <tr>
                    <th rowspan="2">Invoice</th>
                    <th rowspan="2">Tanggal</th>
                    <th rowspan="2">Waktu Bayar</th>
                    <th rowspan="2">Status</th>
                    <th colspan="2">Customer</th>
                    <th colspan="4">Produk</th>
                    <th colspan="4">Promo</th>
                    <th rowspan="2">Total Harga</th>
                    <th colspan="3">Voucher Transaksi</th>
                    <th colspan="2">Pengirim</th>
                    <th rowspan="2">Total Akhir</th>
                  </tr>
                  <tr>
                    <th>Nama</th>
                    <th>No hp</th>
                    <th>Nama</th>
                    <th>SKU</th>
                    <th>Jumlah</th>
                    <th>Harga</th>
                    <th>%</th>
                    <th>Rp</th>
                    <th>Kode</th>
                    <th>Harga Promo</th>
                    <th>%</th>
                    <th>Rp</th>
                    <th>Kode</th>
                    <th>Kurir</th>
                    <th>Ongkir</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let data of listData">
                    <tr *ngFor="let item of data.detail;let i = index">
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.invoice_number }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.date }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0"></td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.status_order }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.recipient }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.phone_number }}</td>
                      <td >{{ item.nama}}</td>
                      <td> {{ item.sku }}</td>
                      <td> {{ item.qty}} </td>
                      <td>{{ item.harga | number }}</td>
                      <td >-</td>
                      <td >-</td>
                      <td >-</td>
                      <td >-</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.total_price | number }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">-</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">-</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">-</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.shipping_sender ? item.shipping_sender : '-' }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.total_pengiriman | number }}</td>
                      <td [attr.rowspan]="data.rowspan" *ngIf="i == 0">{{ item.grand_total | number }}</td>
                    </tr>
                  </ng-container>
                </tbody>
                <tfoot>
                  <tr>
                    <td rowspan="18">Total</td>
                    <td>{{total | number}}</td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content-backdrop fade"></div>
</div>
